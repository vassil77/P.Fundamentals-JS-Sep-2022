На ред 12 и 24 имате:   break;
всеки от тях заменете с:     commandsLine = input.shift(); continue;

и ще получите 100/100

Проблема е че прекъсвате целия цикъл. 
Вярното е да преминете към следващата итерация.